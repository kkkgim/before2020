#include "FirebaseESP8266.h"
#include <ESP8266WiFi.h>
#include <time.h> 
#include <DS1307RTC.h> 
#include <IRsend.h>
#include <Wire.h>
#include <HDC1080.h>
#include <TimeLib.h>
#include <WiFiUdp.h>
#include <cm1106_i2c.h>

//아두이노1-feeder,buzzer, 아두이노2-feeder,buzzer, 아두이노3-temp,krled, 아두이노4-temp, 아두이노5-temp, 아두이노6-fan, 아두이노7-fan
String kinds = "arduino5";
#define temp
//#define air
//#define fan
//#define feeder
//#define CO2
// 16번-feeder, 5번- buzzer, 14번-fan, 13번-air

#define pin_fan 2
#define kIrLed 3
#define speakerPin 16                            
#define led 0
#define ENA 14
#define EN1 12  
#define EN2 13

CM1106_I2C cm1106_i2c;
static volatile uint32_t _dwTickCount = 0 ;
//2. Define FirebaseESP8266 data object for data sending and receiving
FirebaseData firebaseData;
HDC1080 hdcSensor;
IRsend irsend(kIrLed); 

//1. Change the following info
#define FIREBASE_HOST "newfarmaqua.firebaseio.com" // http 빼고 적어야 됨
#define FIREBASE_AUTH "dPP2mat8U4v7NGw1XM98AHpIKsmzmS5LPmQsOCaU" // 데이터베이스 비밀번호

//#define WIFI_SSID "dlab code academy" // 연결 가능한 wifi의 ssid
//#define WIFI_PASSWORD "dlab2019!" // wifi 비밀번호
#define WIFI_SSID "SK_WiFiGIGAB0CF"
#define WIFI_PASSWORD "1702105452"

uint16_t air_off[199] = {4392, 4448,  522, 1656,  500, 552,  526, 1658,  500, 1656,  500, 552,  526, 552,  526, 1656,  502, 552,  526, 552,  526, 1654,  502, 552,  524, 554,  524, 1654,  502, 1656,  500, 552,  526, 1654,  502, 552,  526, 1654,  502, 1654,  502, 1656,  500, 1656,  500, 552,  526, 1656,  502, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  524, 554,  524, 1656,  500, 552,  526, 552,  524, 1658,  500, 1656,  500, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  526, 1656,  500, 1654,  502, 1656,  500, 1658,  500, 1656,  500, 5236,  4392, 4448,  524, 1658,  500, 554,  522, 1656,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 552,  526, 1658,  500, 552,  526, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 552,  526, 1656,  500, 1656,  500, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  526, 1656,  502, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  524, 1656,  500, 1654,  502, 1656,  502, 1654,  502, 1654,  500};  // COOLIX B27BE0
uint16_t air_dry[199] = {4392, 4446,  526, 1658,  500, 552,  524, 1658,  498, 1656,  500, 554,  524, 554,  524, 1658,  500, 552,  526, 552,  526, 1658,  498, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 1658,  500, 552,  526, 552,  526, 550,  528, 1656,  498, 1656,  500, 1634,  522, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 552,  524, 554,  524, 554,  524, 552,  526, 552,  524, 554,  524, 554,  526, 552,  526, 1656,  500, 552,  524, 1658,  498, 554,  524, 554,  526, 1658,  498, 1656,  500, 1658,  500, 552,  526, 1656,  500, 552,  526, 1658,  498, 1658,  498, 5238,  4392, 4448,  526, 1658,  498, 554,  526, 1658,  500, 1658,  498, 552,  524, 554,  526, 1658,  498, 554,  524, 552,  526, 1658,  500, 552,  526, 552,  526, 1658,  500, 1656,  500, 552,  526, 1656,  500, 552,  526, 552,  524, 554,  526, 1656,  500, 1656,  500, 1658,  500, 1656,  498, 1658,  502, 1656,  500, 1658,  498, 1656,  500, 552,  524, 554,  524, 554,  524, 552,  526, 554,  524, 552,  524, 554,  526, 552,  526, 1656,  500, 554,  526, 1656,  500, 552,  526, 552,  526, 1658,  500, 1658,  498, 1658,  500, 552,  524, 1658,  502, 552,  526, 1656,  500, 1658,  500};  // COOLIX B21F14


uint16_t cool17Min[199] = {4392, 4450,  524, 1656,  500, 552,  526, 1656,  502, 1658,  498, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1658,  498, 552,  526, 552,  524, 1658,  498, 1658,  498, 554,  524, 1658,  500, 1658,  500, 552,  526, 552,  524, 1658,  500, 1656,  500, 1658,  498, 1656,  500, 1658,  498, 552,  526, 1656,  502, 1654,  502, 552,  526, 552,  524, 552,  524, 554,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 1658,  500, 1658,  498, 1658,  500, 1658,  500, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 5236,  4392, 4446,  526, 1658,  498, 552,  526, 1658,  498, 1658,  500, 552,  526, 552,  526, 1656,  500, 552,  524, 554,  524, 1658,  500, 552,  526, 552,  526, 1656,  500, 1658,  498, 552,  526, 1658,  498, 1658,  500, 552,  526, 552,  526, 1658,  498, 1658,  500, 1658,  500, 1656,  500, 1658,  500, 552,  524, 1658,  500, 1656,  500, 552,  526, 552,  526, 550,  526, 552,  526, 552,  526, 552,  524, 554,  526, 552,  526, 552,  524, 552,  526, 554,  524, 552,  526, 552,  526, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 1658,  498}; //COOLIX B29F00
uint16_t cool17Mid[199] = {4392, 4448,  524, 1656,  500, 554,  524, 1658,  498, 1658,  500, 554,  524, 554,  524, 1656,  500, 554,  524, 554,  524, 1658,  500, 554,  524, 552,  524, 1658,  500, 1656,  500, 554,  526, 1656,  500, 552,  524, 1656,  500, 552,  526, 1658,  498, 1656,  500, 1658,  498, 1658,  498, 1656,  500, 1658,  500, 554,  524, 1658,  498, 552,  526, 552,  526, 552,  524, 554,  524, 552,  526, 554,  524, 552,  524, 554,  526, 552,  526, 552,  526, 554,  524, 552,  524, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1658,  498, 1658,  500, 5234,  4394, 4448,  524, 1658,  498, 554,  524, 1656,  500, 1656,  500, 552,  524, 552,  526, 1658,  498, 554,  524, 554,  526, 1656,  500, 554,  524, 552,  526, 1656,  500, 1658,  498, 554,  524, 1656,  500, 554,  524, 1656,  500, 554,  524, 1658,  498, 1658,  500, 1658,  500, 1658,  500, 1658,  500, 1656,  500, 554,  524, 1658,  498, 552,  524, 554,  524, 552,  524, 554,  524, 554,  526, 552,  524, 552,  526, 554,  524, 554,  524, 554,  524, 552,  524, 554,  524, 554,  524, 1658,  500, 1656,  500, 1656,  500, 1656,  498, 1658,  500, 1656,  500, 1658,  500, 1656,  500};  // COOLIX B25F00
uint16_t cool17Max[199] = {4392, 4446,  524, 1658,  498, 554,  524, 1658,  500, 1658,  500, 552,  524, 554,  524, 1658,  498, 554,  524, 554,  524, 1658,  500, 552,  524, 554,  524, 1658,  500, 1658,  498, 554,  524, 1656,  500, 554,  524, 554,  524, 1658,  500, 1656,  500, 1656,  498, 1658,  498, 1658,  498, 1658,  498, 1658,  500, 1656,  498, 554,  524, 552,  524, 554,  524, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 552,  524, 554,  524, 554,  524, 554,  524, 552,  526, 554,  524, 1658,  498, 1658,  498, 1658,  500, 1656,  498, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 5236,  4392, 4448,  524, 1656,  498, 554,  526, 1656,  500, 1656,  500, 552,  524, 554,  524, 1656,  500, 554,  524, 552,  524, 1660,  498, 554,  524, 554,  524, 1658,  500, 1656,  500, 552,  526, 1656,  500, 554,  524, 554,  526, 1656,  498, 1658,  500, 1656,  500, 1658,  498, 1658,  498, 1658,  500, 1658,  498, 1656,  498, 554,  526, 552,  524, 554,  524, 554,  524, 552,  526, 552,  524, 554,  524, 554,  524, 552,  524, 554,  524, 554,  524, 554,  524, 552,  524, 554,  524, 1658,  500, 1658,  500, 1658,  498, 1658,  500, 1658,  498, 1656,  500, 1658,  500, 1656,  498};  // COOLIX B23F00
uint16_t cool17Auto[199] = {4392, 4446,  524, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  524, 552,  526, 1658,  498, 554,  524, 552,  526, 1658,  498, 552,  526, 550,  528, 1658,  500, 1658,  498, 552,  528, 1658,  498, 1658,  500, 554,  524, 1658,  500, 1656,  500, 1656,  500, 1658,  498, 1656,  500, 1658,  498, 554,  524, 1658,  500, 552,  524, 550,  528, 554,  524, 550,  526, 552,  526, 552,  526, 552,  524, 554,  524, 554,  524, 552,  528, 550,  526, 552,  526, 554,  524, 554,  526, 1656,  500, 1658,  500, 1656,  502, 1656,  500, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 5238,  4392, 4448,  522, 1658,  500, 550,  528, 1656,  500, 1658,  498, 552,  524, 554,  524, 1656,  500, 550,  526, 552,  526, 1658,  498, 552,  524, 554,  524, 1656,  500, 1658,  498, 552,  526, 1656,  500, 1656,  500, 552,  524, 1658,  502, 1656,  498, 1658,  500, 1656,  500, 1658,  498, 1656,  500, 552,  526, 1658,  500, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  498, 1658,  500, 1658,  498, 1658,  498, 1658,  500, 1656,  500, 1658,  498, 1656,  500};  // COOLIX B2BF00

uint16_t cool18Min[199] = {4392, 4472,  500, 1656,  502, 552,  526, 1654,  502, 1656,  502, 554,  524, 552,  526, 1654,  502, 552,  524, 554,  524, 1656,  500, 554,  524, 554,  524, 1656,  502, 1654,  502, 552,  524, 1656,  502, 1654,  502, 554,  524, 554,  524, 1656,  502, 1656,  500, 1656,  502, 1656,  502, 1654,  502, 554,  524, 1656,  502, 1656,  502, 552,  526, 554,  524, 554,  524, 554,  524, 554,  526, 552,  524, 554,  524, 554,  524, 1656,  500, 554,  526, 552,  526, 552,  526, 552,  526, 1654,  502, 1656,  502, 1656,  500, 554,  524, 1656,  502, 1654,  502, 1656,  502, 1654,  504, 5260,  4370, 4472,  502, 1654,  502, 554,  524, 1656,  502, 1656,  502, 554,  524, 554,  524, 1654,  502, 554,  526, 552,  524, 1656,  502, 552,  526, 552,  524, 1654,  502, 1654,  502, 554,  524, 1656,  502, 1656,  502, 554,  524, 554,  524, 1656,  502, 1656,  502, 1654,  502, 1656,  502, 1654,  502, 554,  524, 1656,  504, 1654,  502, 554,  526, 552,  524, 552,  526, 554,  524, 554,  526, 552,  524, 554,  526, 552,  526, 1656,  500, 554,  524, 554,  524, 554,  524, 554,  524, 1654,  502, 1654,  504, 1652,  502, 554,  526, 1654,  502, 1654,  504, 1654,  502, 1654,  502};  // COOLIX B29F10
uint16_t cool18Auto[199] = {4394, 4450,  522, 1658,  498, 552,  526, 1658,  500, 1658,  498, 552,  526, 554,  524, 1658,  500, 550,  528, 552,  526, 1656,  500, 554,  526, 552,  524, 1658,  500, 1656,  500, 552,  526, 1658,  498, 1658,  500, 552,  526, 1656,  500, 1658,  500, 1656,  502, 1656,  500, 1656,  500, 1658,  500, 554,  524, 1656,  500, 552,  524, 554,  524, 554,  524, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 554,  524, 1658,  500, 552,  528, 552,  526, 552,  526, 552,  526, 1658,  498, 1658,  500, 1658,  498, 554,  524, 1658,  500, 1658,  500, 1658,  500, 1658,  498, 5238,  4394, 4450,  524, 1658,  500, 552,  526, 1658,  500, 1656,  500, 552,  526, 550,  526, 1658,  500, 554,  524, 552,  526, 1658,  500, 552,  526, 554,  524, 1658,  500, 1656,  500, 552,  526, 1658,  498, 1658,  500, 552,  526, 1658,  500, 1658,  500, 1658,  500, 1658,  500, 1658,  498, 1658,  500, 552,  526, 1658,  498, 554,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 554,  524, 1658,  500, 552,  526, 552,  526, 552,  524, 554,  526, 1656,  498, 1658,  500, 1658,  500, 550,  528, 1658,  500, 1658,  500, 1658,  498, 1656,  500};  // COOLIX B2BF10
uint16_t cool18Mid[199] = {4390, 4448,  524, 1654,  502, 552,  524, 1656,  502, 1654,  500, 554,  524, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1654,  502, 1654,  502, 552,  524, 1656,  502, 552,  526, 1654,  500, 552,  526, 1656,  500, 1656,  502, 1654,  500, 1656,  500, 1656,  500, 1654,  502, 552,  526, 1656,  500, 552,  524, 554,  526, 552,  524, 552,  526, 552,  524, 554,  524, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 552,  524, 552,  526, 1656,  502, 1654,  502, 1656,  502, 552,  524, 1654,  502, 1654,  502, 1654,  502, 1656,  500, 5260,  4366, 4446,  526, 1654,  500, 552,  526, 1654,  500, 1656,  502, 550,  526, 552,  524, 1656,  500, 554,  524, 552,  524, 1656,  502, 552,  526, 552,  526, 1654,  502, 1654,  502, 554,  526, 1654,  502, 552,  526, 1654,  502, 552,  526, 1656,  500, 1656,  502, 1656,  500, 1656,  502, 1654,  502, 1654,  500, 552,  526, 1654,  502, 550,  526, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 552,  524, 1654,  502, 552,  526, 552,  526, 552,  526, 552,  524, 1654,  500, 1656,  500, 1656,  500, 552,  524, 1656, 500, 1656, 500, 1656, 502,1654,502};  // COOLIX B25F10
uint16_t cool18Max[199]= {4370, 4446,  524, 1656,  502, 552,  526, 1656,  502, 1654,  502, 554,  524, 552,  526, 1654,  502, 552,  526, 552,  526, 1656,  502, 552,  526, 552,  524, 1656,  500, 1656,  500, 554,  526, 1654,  500, 554,  524, 552,  526, 1654,  500, 1656,  502, 1656,  500, 1656,  502, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 1656,  500, 554,  524, 552,  526, 552,  524, 552,  524, 1656,  500, 1658,  500, 1656,  500, 552,  526, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 5236,  4392, 4472,  498, 1658,  500, 552,  524, 1658,  500, 1658,  498, 552,  526, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  500, 552,  526, 552,  524, 1658,  500, 1656,  500, 552,  526, 1658,  498, 554,  524, 552,  524, 1658,  500, 1656,  500, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 554,  524, 552,  526, 552,  524, 554,  524, 554,  524, 552,  526, 552,  526, 550,  526, 552,  526, 1658,  500, 552,  524, 552,  526, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 552,  526, 1656, 502, 1656, 500, 1658, 500,1656,500};  // COOLIX B23F10


uint16_t cool19Min[199] = {4390, 4472,  500, 1658,  498, 552,  526, 1656,  498, 1658,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 554,  524, 1658,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 552,  526, 1656,  500, 1658,  498, 552,  526, 552,  526, 1656,  502, 1656,  500, 1658,  500, 1656,  500, 1656,  502, 552,  526, 1656,  500, 1658,  500, 552,  524, 554,  524, 554,  524, 552,  526, 552,  526, 552,  524, 554,  526, 1658,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 550,  526, 1658,  500, 1658,  500, 552,  524, 554,  524, 1658,  500, 1656,  500, 1656,  500, 1658,  498, 5236,  4394, 4448,  524, 1656,  502, 552,  526, 1656,  502, 1656,  500, 552,  524, 552,  526, 1656,  502, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  500, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  524, 1656,  498, 1658,  500, 1656,  500, 1656,  500, 1658,  498, 552,  524, 1658,  500, 1656,  500, 552,  524, 554,  526, 552,  526, 554,  524, 552,  526, 552,  526, 554,  524, 1656,  500, 1658,  500, 552,  526, 552,  524, 552,  526, 552,  524, 1658,  498, 1656,  500, 552,  524, 552,  526, 1656,  500, 1656,  502, 1654,  500, 1656,  500};  // COOLIX B29F30
uint16_t cool19Auto[199] = {4390, 4448,  522, 1656,  502, 552,  524, 1654,  502, 1654,  502, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  524, 1658,  500, 552,  524, 552,  526, 1654,  502, 1656,  502, 554,  524, 1656,  500, 1656,  502, 552,  524, 1656,  500, 1656,  502, 1654,  500, 1654,  502, 1656,  500, 1656,  500, 552,  526, 1654,  502, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 554,  524, 1656,  502, 1656,  500, 554,  524, 554,  524, 552,  524, 554,  526, 1656,  500, 1656,  502, 552,  526, 554,  524, 1656,  500, 1654,  502, 1654,  502, 1654,  502, 5260,  4368, 4446,  526, 1654,  502, 552,  526, 1656,  500, 1656,  502, 552,  524, 554,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  524, 1656,  502, 1654,  502, 552,  526, 1656,  500, 1656,  502, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 552,  524, 1656,  500, 552,  526, 554,  524, 552,  524, 554,  524, 552,  526, 552,  526, 552,  526, 552,  524, 1656,  500, 1656,  500, 552,  526, 552,  524, 554,  524, 552,  524, 1658,  500, 1656,  500, 552,  526, 552,  524, 1658,  500, 1656,  500, 1656,  500, 1656,  500};  // COOLIX B2BF30
uint16_t cool19Mid[199] = {4392, 4446,  524, 1658,  500, 554,  526, 1656,  500, 1658,  500, 552,  526, 552,  524, 1658,  498, 552,  524, 552,  526, 1656,  500, 552,  526, 552,  524, 1660,  498, 1658,  500, 554,  524, 1656,  500, 552,  526, 1656,  500, 552,  526, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 552,  524, 1656,  500, 552,  524, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 1658,  500, 1656,  498, 554,  524, 554,  524, 552,  526, 552,  526, 1656,  500, 1656,  498, 554,  524, 552,  526, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 5238,  4390, 4448,  524, 1656,  500, 552,  526, 1656,  500, 1656,  500, 554,  526, 554,  524, 1656,  500, 554,  524, 554,  524, 1656,  500, 552,  526, 554,  524, 1658,  500, 1656,  500, 552,  524, 1658,  500, 552,  526, 1656,  500, 552,  526, 1656,  500, 1658,  498, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 554,  526, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  524, 554,  526, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  524, 552,  524, 554,  526, 552,  524, 1658,  500, 1656,  500, 554,  524, 552,  526, 1656,  500, 1656,  500, 1658,  500, 1658,  498};  // COOLIX B25F30
uint16_t cool19Max[199]= {4392, 4448,  524, 1658,  500, 554,  524, 1656,  500, 1658,  500, 554,  524, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  500, 552,  524, 554,  526, 1658,  500, 1656,  500, 554,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  498, 1658,  500, 1658,  500, 1658,  500, 1656,  500, 552,  526, 552,  526, 552,  524, 554,  526, 552,  526, 552,  524, 554,  524, 552,  524, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 1658,  500, 1658,  498, 554,  524, 552,  526, 1656,  500, 1658,  500, 1656,  500, 1658,  500, 5238,  4390, 4450,  522, 1658,  498, 554,  524, 1658,  498, 1656,  500, 554,  524, 554,  524, 1656,  500, 552,  526, 554,  524, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 554,  524, 1656,  502, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 552,  524, 554,  524, 552,  526, 554,  524, 554,  524, 552,  526, 552,  524, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  502, 1656,  500, 1656,  500};  // COOLIX B23F30

uint16_t cool20Min[199] = {4394, 4448,  526, 1658,  500, 552,  526, 1658,  500, 1656,  500, 554,  524, 554,  526, 1656,  500, 554,  526, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 552,  526, 1656,  500, 1658,  498, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 554,  524, 1658,  498, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 1658,  500, 554,  524, 1658,  500, 1658,  500, 1658,  498, 1658,  500, 1658,  498, 5238,  4392, 4450,  524, 1658,  500, 552,  524, 1658,  498, 1658,  498, 554,  524, 554,  524, 1658,  500, 552,  524, 554,  526, 1658,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 554,  524, 1658,  500, 1656,  500, 554,  526, 552,  526, 1658,  500, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 552,  526, 1658,  500, 1656,  498, 552,  526, 554,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 1658,  498, 554,  524, 554,  524, 554,  526, 552,  526, 552,  526, 1656,  502, 1656,  498, 554,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  500};  // COOLIX B29F20
uint16_t cool20Auto[199] = {4392, 4448,  526, 1656,  500, 554,  524, 1658,  500, 1656,  500, 554,  524, 554,  524, 1658,  498, 554,  524, 554,  524, 1658,  500, 552,  524, 554,  524, 1658,  500, 1658,  500, 552,  524, 1658,  500, 1658,  498, 552,  526, 1658,  500, 1656,  500, 1658,  500, 1658,  498, 1658,  500, 1658,  500, 552,  526, 1658,  500, 554,  524, 554,  524, 552,  526, 552,  526, 554,  524, 554,  524, 554,  524, 554,  524, 1658,  500, 552,  524, 554,  526, 552,  524, 554,  524, 552,  526, 1656,  500, 1658,  498, 554,  524, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 5238,  4392, 4448,  524, 1658,  500, 552,  526, 1658,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  524, 1658,  500, 552,  524, 554,  526, 1656,  500, 1658,  500, 552,  526, 1658,  500, 1658,  500, 552,  526, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 554,  524, 1658,  500, 554,  524, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 554,  524, 552,  526, 1656,  500, 552,  526, 552,  524, 552,  526, 554,  524, 552,  524, 1658,  498, 1658,  500, 554,  524, 1658,  500, 1656,  500, 1658,  500, 1658,  498, 1658,  500};  // COOLIX B2BF20
uint16_t cool20Mid[199] = {4392, 4472,  498, 1658,  498, 552,  526, 1656,  500, 1658,  498, 552,  524, 552,  526, 1658,  498, 554,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  500, 552,  526, 1656,  500, 552,  524, 1658,  500, 552,  526, 1658,  500, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 1658,  500, 552,  526, 1658,  500, 552,  524, 552,  526, 552,  524, 552,  526, 552,  526, 550,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1658,  498, 1658,  500, 552,  524, 1656,  502, 1656,  500, 1656,  498, 1658,  500, 1656,  500, 5262,  4368, 4450,  522, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1634,  522, 552,  526, 552,  526, 1658,  498, 1656,  500, 552,  524, 1658,  498, 552,  526, 1656,  500, 552,  526, 1656,  500, 1658,  500, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 552,  524, 1658,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 554,  524, 1656,  500, 554,  526, 552,  526, 550,  526, 552,  526, 552,  526, 1656,  500, 1658,  500, 552,  526, 1658,  500, 1656,  500, 1658,  498, 1658,  500, 1658,  498};  // COOLIX B25F20
uint16_t cool20Max[199]= {4368, 4448,  526, 1654,  502, 552,  524, 1654,  502, 1654,  502, 552,  524, 554,  524, 1656,  502, 552,  524, 554,  524, 1656,  500, 554,  526, 552,  524, 1656,  500, 1654,  502, 552,  526, 1654,  500, 554,  524, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 1656,  502, 1656,  500, 552,  526, 552,  524, 554,  526, 552,  524, 554,  524, 554,  524, 554,  524, 554,  524, 1658,  500, 552,  526, 552,  524, 554,  524, 554,  524, 554,  524, 1656,  500, 1656,  500, 552,  526, 1658,  498, 1658,  500, 1658,  498, 1658,  498, 1658,  500, 5238,  4390, 4450,  522, 1658,  498, 554,  524, 1658,  498, 1658,  498, 554,  526, 552,  524, 1658,  500, 552,  526, 552,  524, 1658,  498, 554,  524, 554,  524, 1656,  500, 1656,  500, 554,  524, 1658,  500, 552,  526, 552,  524, 1658,  500, 1658,  500, 1656,  500, 1658,  500, 1658,  498, 1656,  500, 1658,  500, 1656,  500, 552,  526, 552,  524, 554,  524, 554,  526, 552,  526, 552,  526, 552,  524, 554,  524, 1658,  498, 554,  524, 552,  526, 554,  524, 554,  524, 552,  526, 1656,  500, 1656,  500, 552,  524, 1658,  500, 1658,  500, 1658,  500, 1656,  500, 1656,  498};  // COOLIX B23F20

uint16_t cool21Min[199] = {4392, 4472,  502, 1654,  502, 552,  524, 1654,  502, 1656,  502, 552,  524, 554,  526, 1654,  502, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 1654,  502, 1654,  504, 552,  524, 1656,  502, 1654,  502, 552,  526, 552,  524, 1654,  502, 1654,  502, 1654,  502, 1656,  502, 1656,  502, 552,  526, 1656,  502, 1654,  504, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1654,  502, 1656,  502, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 1654,  502, 1654,  502, 1654,  502, 1656,  500, 5260,  4368, 4448,  524, 1654,  502, 552,  524, 1656,  502, 1654,  502, 552,  524, 554,  524, 1656,  502, 552,  524, 552,  526, 1654,  502, 552,  524, 552,  526, 1654,  502, 1656,  502, 552,  524, 1656,  500, 1656,  500, 554,  524, 552,  526, 1654,  502, 1654,  502, 1654,  500, 1656,  502, 1656,  502, 552,  524, 1656,  502, 1656,  500, 554,  524, 554,  524, 554,  524, 554,  524, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  526, 552,  524, 1656,  500, 554,  526, 552,  524, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 1656,  502};  // COOLIX B29F60
uint16_t cool21Auto[199] = {4390, 4472,  502, 1654,  502, 552,  526, 1656,  502, 1654,  502, 552,  526, 552,  524, 1656,  502, 552,  524, 554,  524, 1656,  502, 552,  524, 554,  524, 1656,  500, 1656,  500, 554,  524, 1656,  500, 1654,  502, 552,  526, 1654,  502, 1654,  502, 1656,  500, 1656,  504, 1654,  502, 1656,  500, 552,  526, 1654,  500, 554,  524, 552,  526, 552,  526, 552,  524, 554,  524, 554,  526, 552,  524, 1656,  502, 1656,  502, 552,  526, 554,  524, 554,  526, 552,  524, 554,  524, 1656,  502, 552,  526, 552,  524, 1656,  502, 1656,  502, 1654,  502, 1656,  500, 1656,  502, 5260,  4368, 4446,  524, 1656,  500, 552,  526, 1654,  502, 1656,  502, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  524, 1656,  500, 1654,  502, 554,  524, 1656,  500, 1656,  502, 552,  526, 1654,  502, 1656,  500, 1656,  502, 1656,  502, 1656,  500, 1656,  502, 554,  524, 1656,  502, 552,  526, 554,  526, 550,  526, 554,  524, 552,  524, 554,  524, 552,  526, 1654,  502, 1654,  502, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1654,  502, 552,  524, 554,  524, 1656,  502, 1656,  500, 1654,  502, 1656,  500, 1654,  502};  // COOLIX B2BF60
uint16_t cool21Mid[199] = {4368, 4448,  524, 1658,  500, 552,  526, 1654,  502, 1656,  500, 552,  526, 552,  526, 1656,  502, 552,  526, 552,  526, 1656,  500, 552,  526, 554,  524, 1656,  500, 1656,  500, 552,  526, 1654,  500, 552,  526, 1654,  502, 552,  526, 1656,  502, 1656,  500, 1656,  500, 1656,  502, 1654,  500, 1656,  500, 554,  526, 1656,  500, 554,  524, 554,  526, 552,  524, 552,  526, 552,  526, 552,  526, 1656,  500, 1656,  500, 554,  524, 554,  524, 552,  526, 552,  526, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 5238,  4392, 4446,  524, 1656,  500, 552,  526, 1656,  500, 1656,  500, 554,  524, 552,  524, 1658,  500, 554,  526, 552,  524, 1658,  500, 552,  526, 552,  526, 1656,  500, 1658,  500, 552,  526, 1656,  500, 554,  524, 1656,  500, 552,  524, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1656,  498, 1658,  500, 552,  526, 1654,  500, 552,  526, 552,  524, 552,  526, 552,  526, 552,  524, 552,  524, 1656,  500, 1656,  500, 552,  524, 552,  526, 552,  524, 552,  526, 552,  524, 1656,  500, 552,  526, 554,  524, 1656,  498, 1658,  500, 1656,  500, 1656,  500, 1656,  500};  // COOLIX B25F60
uint16_t cool21Max[199]= {4392, 4448,  524, 1658,  498, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  524, 1658,  500, 552,  526, 552,  526, 1658,  500, 552,  524, 552,  526, 1658,  498, 1656,  500, 554,  524, 1658,  500, 552,  526, 552,  526, 1654,  500, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 1656,  502, 1656,  500, 552,  526, 552,  526, 552,  524, 554,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 1658,  498, 5238,  4392, 4446,  526, 1656,  500, 552,  526, 1658,  500, 1656,  500, 552,  524, 552,  526, 1656,  500, 552,  524, 552,  526, 1658,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  524, 1658,  500, 554,  524, 552,  526, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 550,  526, 1658,  498, 1658,  500, 550,  526, 554,  524, 552,  526, 552,  526, 552,  526, 1656,  502, 552,  526, 552,  524, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1656,  500};  // COOLIX B23F60

uint16_t cool22Min[199] = {4394, 4470,  500, 1656,  502, 552,  526, 1654,  502, 1656,  500, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 1656,  502, 1654,  502, 552,  524, 1656,  500, 1656,  502, 552,  526, 552,  526, 1654,  502, 1654,  502, 1656,  502, 1654,  502, 1654,  502, 552,  526, 1654,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 1654,  502, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  524, 552,  526, 1654,  502, 552,  524, 552,  526, 554,  524, 1656,  500, 1656,  502, 1652,  502, 1656,  502, 5236,  4392, 4446,  526, 1654,  502, 552,  526, 1654,  502, 1654,  502, 552,  524, 552,  526, 1654,  502, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 1654,  502, 1656,  502, 552,  526, 1654,  502, 1654,  502, 554,  524, 552,  524, 1656,  502, 1654,  502, 1654,  502, 1654,  502, 1654,  504, 552,  526, 1654,  502, 1654,  502, 552,  526, 552,  526, 552,  526, 554,  526, 552,  526, 554,  524, 1654,  502, 1654,  502, 1656,  500, 554,  524, 554,  524, 552,  526, 552,  524, 1654,  502, 554,  526, 552,  526, 552,  524, 1654,  502, 1654,  502, 1654,  502, 1654,  502};  // COOLIX B29F70
uint16_t cool22Auto[199] = {4394, 4472,  498, 1656,  500, 554,  524, 1656,  500, 1656,  500, 554,  524, 552,  524, 1658,  498, 552,  526, 554,  524, 1656,  500, 554,  524, 554,  524, 1658,  498, 1656,  500, 554,  524, 1656,  498, 1658,  500, 554,  524, 1658,  498, 1656,  500, 1658,  500, 1656,  500, 1656,  498, 1658,  500, 552,  526, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  524, 554,  524, 554,  524, 552,  524, 1658,  498, 1656,  500, 1656,  498, 554,  524, 554,  524, 552,  526, 552,  526, 1656,  500, 554,  524, 554,  524, 552,  526, 1656,  500, 1656,  500, 1656,  498, 1656,  500, 5238,  4390, 4446,  524, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  524, 554,  524, 1656,  500, 552,  524, 554,  524, 1656,  500, 552,  524, 552,  524, 1658,  498, 1658,  498, 554,  524, 1656,  498, 1658,  500, 552,  524, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 554,  524, 1656,  500, 552,  524, 554,  524, 554,  524, 552,  524, 554,  524, 552,  524, 554,  524, 1658,  500, 1658,  500, 1656,  498, 554,  526, 552,  524, 554,  524, 552,  524, 1656,  500, 554,  524, 554,  524, 554,  524, 1658,  500, 1656,  500, 1656,  498, 1658,  500};  // COOLIX B2BF70
uint16_t cool22Mid[199] = {4368, 4444,  528, 1656,  500, 552,  526, 1654,  502, 1656,  500, 552,  526, 552,  526, 1654,  500, 554,  524, 552,  524, 1656,  502, 552,  524, 552,  526, 1654,  502, 1656,  500, 554,  524, 1656,  502, 552,  524, 1654,  502, 552,  526, 1656,  502, 1654,  502, 1654,  504, 1654,  502, 1656,  500, 1656,  500, 552,  526, 1656,  500, 552,  526, 552,  524, 554,  524, 554,  524, 552,  524, 554,  524, 1656,  502, 1654,  500, 1656,  500, 554,  524, 552,  526, 552,  526, 552,  524, 1656,  502, 552,  524, 554,  526, 552,  526, 1654,  502, 1656,  500, 1656,  500, 1656,  500, 5236,  4392, 4446,  524, 1656,  500, 552,  524, 1656,  502, 1656,  500, 554,  524, 552,  526, 1656,  500, 552,  526, 552,  524, 1654,  502, 552,  524, 552,  526, 1656,  502, 1656,  500, 552,  526, 1656,  500, 554,  524, 1656,  500, 552,  526, 1656,  500, 1656,  500, 1656,  502, 1654,  500, 1658,  500, 1656,  500, 552,  526, 1654,  502, 554,  524, 554,  524, 552,  526, 552,  524, 554,  524, 552,  526, 1656,  500, 1654,  502, 1656,  500, 552,  526, 552,  524, 554,  526, 552,  526, 1654,  500, 554,  526, 552,  526, 554,  524, 1654,  502, 1656,  500, 1656,  500, 1656,  502};  // COOLIX B25F70
uint16_t cool22Max[199]= {4392, 4450,  522, 1654,  502, 552,  524, 1656,  502, 1654,  500, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  526, 1654,  502, 552,  524, 552,  526, 1654,  502, 1656,  502, 552,  524, 1656,  502, 552,  526, 552,  526, 1654,  502, 1654,  500, 1656,  502, 1654,  502, 1656,  502, 1654,  502, 1654,  502, 1654,  502, 552,  524, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 1656,  502, 1654,  500, 554,  524, 552,  526, 552,  524, 552,  526, 1654,  502, 552,  524, 552,  524, 552,  524, 1656,  502, 1656,  500, 1656,  502, 1654,  502, 5260,  4368, 4446,  524, 1654,  502, 552,  524, 1656,  500, 1656,  500, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  526, 1656,  502, 1654,  500, 554,  526, 1654,  500, 552,  524, 554,  524, 1656,  500, 1654,  502, 1654,  502, 1654,  502, 1654,  502, 1654,  502, 1656,  500, 1656,  502, 552,  524, 552,  526, 552,  526, 552,  526, 552,  524, 554,  526, 552,  526, 1654,  502, 1656,  500, 1654,  502, 552,  524, 554,  526, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  526, 552,  524, 1656,  500, 1656,  502, 1654,  502, 1656,  500};  // COOLIX B23F70

uint16_t cool23Min[199] = {4368, 4470,  502, 1654,  502, 552,  524, 1656,  502, 1654,  502, 552,  526, 552,  526, 1654,  502, 552,  524, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  500, 1656,  502, 554,  524, 1654,  500, 1654,  502, 552,  526, 552,  524, 1656,  502, 1656,  500, 1656,  502, 1654,  502, 1654,  502, 552,  526, 1654,  502, 1654,  502, 552,  524, 554,  524, 554,  526, 552,  526, 552,  524, 552,  526, 1654,  502, 554,  524, 1656,  502, 552,  524, 552,  526, 554,  524, 552,  526, 1654,  502, 554,  526, 1656,  500, 554,  524, 1654,  502, 1654,  502, 1654,  504, 1654,  502, 5258,  4368, 4446,  524, 1654,  502, 552,  524, 1656,  500, 1656,  502, 550,  526, 552,  524, 1654,  502, 552,  524, 552,  526, 1654,  502, 552,  526, 552,  524, 1654,  502, 1654,  502, 552,  526, 1654,  502, 1654,  502, 552,  524, 552,  526, 1654,  502, 1654,  502, 1654,  502, 1654,  502, 1656,  500, 552,  526, 1654,  502, 1654,  500, 554,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  502, 552,  526, 1654,  502, 554,  524, 552,  526, 552,  524, 554,  524, 1654,  502, 552,  526, 1654,  502, 552,  526, 1654,  502, 1656,  502, 1654,  502, 1654,  502};  // COOLIX B29F50
uint16_t cool23Auto[199] = {4394, 4450,  522, 1656,  500, 554,  524, 1656,  502, 1656,  500, 554,  524, 554,  526, 1656,  500, 552,  524, 554,  524, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 554,  524, 1658,  502, 1656,  500, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  502, 1656,  500, 552,  526, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 1658,  500, 552,  526, 1656,  500, 552,  526, 552,  524, 554,  526, 552,  526, 1656,  500, 552,  526, 1656,  500, 552,  526, 1656,  502, 1656,  500, 1656,  500, 1658,  500, 5236,  4394, 4446,  526, 1656,  500, 554,  526, 1656,  502, 1656,  500, 552,  526, 552,  524, 1658,  500, 554,  524, 552,  526, 1656,  502, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  524, 1658,  500, 1656,  498, 1658,  500, 1656,  500, 1656,  502, 1656,  500, 552,  524, 1656,  500, 554,  524, 554,  526, 550,  526, 554,  524, 554,  526, 552,  524, 554,  524, 1656,  500, 554,  526, 1656,  502, 552,  524, 554,  524, 554,  526, 552,  526, 1658,  500, 552,  526, 1656,  500, 552,  526, 1656,  502, 1656,  500, 1656,  500, 1658,  500};  // COOLIX B2BF50
uint16_t cool23Mid[199] = {4392, 4448,  522, 1654,  504, 552,  524, 1654,  502, 1654,  502, 552,  526, 552,  524, 1654,  502, 552,  526, 552,  524, 1656,  502, 552,  526, 552,  524, 1654,  502, 1654,  502, 552,  524, 1654,  502, 552,  526, 1654,  502, 552,  524, 1654,  502, 1654,  500, 1656,  502, 1654,  502, 1656,  502, 1654,  502, 552,  526, 1654,  502, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 1656,  500, 552,  526, 1654,  502, 554,  526, 552,  524, 554,  524, 552,  526, 1654,  502, 552,  526, 1656,  500, 554,  524, 1656,  502, 1656,  502, 1654,  502, 1654,  502, 5236,  4394, 4448,  524, 1656,  502, 552,  526, 1656,  502, 1656,  500, 552,  524, 554,  524, 1656,  500, 552,  524, 554,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 1656,  500, 552,  524, 1656,  500, 552,  526, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 552,  526, 1656,  498, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 552,  526, 1656,  500, 554,  524, 552,  526, 552,  526, 552,  526, 1656,  500, 552,  526, 1658,  500, 552,  524, 1658,  498, 1658,  500, 1656,  500, 1656,  500};  // COOLIX B25F50
uint16_t cool23Max[199]= {4390, 4446,  526, 1656,  500, 552,  526, 1658,  500, 1658,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1658,  500, 1656,  500, 552,  526, 1656,  500, 552,  526, 552,  524, 1658,  500, 1658,  498, 1658,  500, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 1658,  500, 552,  526, 552,  524, 552,  524, 554,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 552,  526, 1658,  500, 552,  524, 554,  526, 552,  524, 554,  526, 1658,  498, 552,  524, 1658,  500, 552,  526, 1656,  498, 1658,  500, 1656,  500, 1656,  500, 5262,  4368, 4446,  524, 1658,  500, 552,  526, 1658,  498, 1658,  498, 552,  526, 552,  526, 1658,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  500, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  498, 1658,  498, 1656,  500, 1656,  500, 1656,  500, 1658,  498, 1658,  500, 552,  526, 552,  524, 554,  526, 552,  526, 554,  526, 552,  524, 552,  526, 1658,  500, 552,  524, 1658,  500, 552,  524, 554,  524, 552,  528, 550,  524, 1658,  498, 554,  524, 1658,  500, 552,  526, 1658,  498, 1656,  500, 1656,  500, 1656,  500};  // COOLIX B23F50

uint16_t cool24Min[199] = {4392, 4448,  522, 1656,  500, 554,  524, 1658,  500, 1658,  498, 554,  524, 554,  524, 1656,  500, 554,  522, 554,  524, 1658,  498, 554,  524, 554,  524, 1658,  500, 1658,  498, 554,  524, 1658,  500, 1658,  500, 554,  524, 552,  524, 1658,  498, 1658,  500, 1658,  498, 1658,  500, 1658,  498, 554,  524, 1656,  500, 1658,  498, 554,  524, 554,  524, 554,  524, 552,  526, 552,  526, 554,  524, 1658,  498, 554,  524, 552,  526, 552,  524, 554,  526, 552,  526, 552,  524, 1658,  500, 552,  524, 1660,  498, 1658,  498, 1658,  500, 1658,  500, 1656,  500, 1658,  500, 5236,  4392, 4448,  522, 1658,  500, 554,  522, 1658,  498, 1658,  498, 554,  524, 554,  524, 1656,  500, 554,  524, 554,  526, 1656,  500, 554,  524, 552,  524, 1658,  500, 1656,  500, 554,  524, 1658,  500, 1656,  500, 552,  524, 554,  524, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 554,  524, 1658,  500, 1656,  500, 554,  524, 552,  524, 554,  524, 554,  524, 554,  526, 552,  526, 1658,  498, 552,  524, 554,  524, 554,  524, 552,  526, 552,  526, 552,  524, 1658,  498, 552,  524, 1658,  498, 1656,  500, 1656,  498, 1656,  500, 1658,  498, 1658,  498};  // COOLIX B29F40
uint16_t cool24Auto[199] = {4390, 4450,  522, 1658,  500, 554,  524, 1658,  500, 1658,  500, 552,  524, 554,  524, 1658,  500, 554,  526, 552,  524, 1656,  500, 554,  524, 552,  524, 1658,  498, 1658,  500, 554,  526, 1658,  498, 1658,  500, 552,  526, 1658,  498, 1658,  498, 1658,  500, 1658,  498, 1658,  498, 1658,  498, 554,  524, 1658,  500, 554,  524, 552,  524, 554,  526, 552,  526, 552,  526, 552,  524, 554,  526, 1656,  500, 552,  526, 552,  524, 552,  524, 554,  526, 552,  524, 552,  526, 1658,  500, 552,  526, 1658,  498, 1658,  500, 1658,  500, 1658,  500, 1658,  500, 1658,  498, 5264,  4368, 4448,  524, 1658,  498, 554,  526, 1658,  500, 1658,  500, 554,  524, 554,  526, 1658,  500, 552,  526, 552,  524, 1658,  500, 554,  524, 554,  526, 1658,  498, 1658,  498, 554,  524, 1658,  500, 1658,  498, 554,  526, 1658,  498, 1658,  498, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 552,  524, 1656,  500, 554,  524, 554,  524, 554,  524, 554,  524, 552,  526, 552,  524, 554,  524, 1658,  498, 552,  526, 554,  524, 552,  524, 554,  524, 554,  524, 552,  526, 1658,  498, 554,  524, 1658,  500, 1656,  498, 1658,  498, 1656,  500, 1658,  500, 1656,  500};  // COOLIX B2BF40
uint16_t cool24Mid[199] = {4394, 4474,  498, 1658,  500, 552,  526, 1658,  500, 1656,  500, 552,  526, 552,  526, 1658,  500, 552,  526, 552,  526, 1658,  500, 552,  524, 552,  526, 1656,  500, 1656,  500, 552,  526, 1658,  498, 552,  526, 1658,  498, 552,  526, 1658,  498, 1658,  498, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 552,  526, 1656,  500, 554,  526, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 554,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 1658,  500, 554,  526, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 1656,  502, 1656,  500, 5260,  4368, 4448,  526, 1656,  502, 552,  526, 1656,  502, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1658,  498, 554,  524, 1656,  500, 552,  526, 1658,  500, 552,  526, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1656,  500, 552,  526, 1656,  500, 552,  524, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 1658,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 554,  524, 1658,  500, 550,  526, 1656,  500, 1656,  500, 1658,  500, 1658,  500, 1656,  500, 1656,  502};  // COOLIX B25F40
uint16_t cool24Max[199]= {4368, 4448,  524, 1656,  502, 552,  526, 1656,  500, 1656,  500, 554,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  502, 552,  524, 552,  526, 1656,  500, 1656,  502, 552,  526, 1654,  502, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1656,  502, 1656,  502, 1656,  502, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  524, 552,  526, 554,  524, 552,  526, 552,  526, 1656,  502, 552,  524, 552,  526, 554,  526, 552,  526, 552,  526, 552,  524, 1656,  502, 552,  524, 1656,  500, 1656,  502, 1654,  502, 1654,  500, 1656,  502, 1654,  502, 5236,  4394, 4448,  526, 1654,  502, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 1656,  500, 552,  524, 552,  526, 1656,  502, 552,  524, 552,  526, 1656,  502, 1656,  500, 554,  524, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  502, 1656,  502, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  526, 552,  524, 1658,  500, 552,  524, 554,  524, 552,  526, 554,  526, 550,  526, 552,  526, 1658,  500, 552,  526, 1656,  500, 1658,  498, 1658,  500, 1656,  500, 1656,  500, 1658,  498};  // COOLIX B23F40

uint16_t cool25Min[199] = {4390, 4448,  526, 1658,  500, 552,  526, 1658,  498, 1658,  500, 552,  526, 552,  524, 1658,  498, 554,  524, 554,  524, 1658,  498, 554,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 1656,  500, 1656,  500, 554,  524, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1658,  498, 1656,  500, 552,  524, 1658,  498, 1658,  500, 552,  526, 552,  524, 554,  524, 552,  526, 552,  526, 1656,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 554,  526, 552,  524, 554,  524, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 5238,  4390, 4446,  524, 1656,  500, 550,  526, 1656,  502, 1656,  500, 554,  526, 552,  526, 1658,  498, 554,  524, 552,  526, 1656,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 554,  524, 1658,  498, 1658,  500, 552,  526, 552,  526, 1656,  500, 1656,  500, 1656,  500, 1658,  500, 1656,  500, 552,  526, 1656,  500, 1656,  500, 552,  524, 552,  526, 552,  526, 552,  524, 554,  526, 1656,  498, 1658,  500, 552,  524, 552,  526, 552,  524, 554,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  500, 1658,  500, 1656,  498, 1658,  500, 1656,  500, 1656,  500};  // COOLIX B29FC0
uint16_t cool25Auto[199] = {4392, 4448,  524, 1654,  502, 552,  524, 1656,  502, 1654,  500, 554,  524, 554,  524, 1656,  500, 554,  524, 552,  526, 1656,  500, 554,  524, 552,  526, 1656,  500, 1656,  502, 552,  524, 1656,  500, 1656,  502, 552,  524, 1656,  502, 1656,  500, 1656,  500, 1654,  502, 1656,  500, 1658,  500, 552,  526, 1656,  500, 552,  526, 554,  524, 552,  526, 552,  526, 552,  526, 552,  526, 1656,  502, 1656,  500, 552,  526, 552,  524, 554,  524, 554,  524, 554,  524, 552,  524, 554,  526, 552,  524, 1656,  500, 1656,  502, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 5236,  4392, 4448,  522, 1656,  500, 554,  526, 1656,  500, 1656,  500, 552,  526, 552,  524, 1656,  502, 550,  526, 552,  524, 1656,  500, 552,  524, 552,  526, 1656,  502, 1654,  502, 552,  526, 1654,  502, 1654,  502, 552,  526, 1656,  500, 1656,  502, 1654,  500, 1656,  500, 1656,  500, 1656,  500, 552,  524, 1656,  500, 552,  524, 554,  526, 552,  526, 552,  526, 552,  524, 554,  524, 1656,  502, 1654,  500, 554,  526, 552,  524, 554,  524, 552,  526, 552,  526, 552,  524, 554,  524, 552,  526, 1654,  500, 1656,  500, 1656,  502, 1654,  502, 1656,  502, 1654,  502};  // COOLIX B2BFC0
uint16_t cool25Mid[199]= {4394, 4446,  524, 1658,  498, 552,  526, 1656,  500, 1656,  500, 554,  526, 552,  526, 1656,  500, 554,  524, 552,  526, 1656,  500, 552,  526, 552,  524, 1658,  500, 1656,  500, 552,  524, 1658,  500, 552,  526, 1656,  500, 552,  524, 1658,  498, 1658,  500, 1656,  500, 1658,  500, 1656,  500, 1656,  500, 552,  526, 1656,  500, 554,  524, 552,  524, 554,  524, 552,  526, 552,  526, 1658,  500, 1656,  500, 552,  526, 552,  526, 552,  526, 554,  524, 554,  524, 552,  524, 552,  526, 552,  526, 1654,  502, 1656,  502, 1656,  500, 1656,  500, 1656,  500, 1656,  500, 5236,  4392, 4446,  526, 1656,  500, 552,  524, 1656,  500, 1654,  502, 552,  526, 552,  526, 1656,  500, 552,  526, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 1656,  500, 554,  524, 1656,  502, 552,  524, 1656,  502, 552,  524, 1656,  502, 1656,  502, 1656,  500, 1656,  500, 1656,  502, 1654,  502, 552,  526, 1656,  500, 552,  526, 552,  524, 552,  526, 552,  526, 552,  526, 1656,  500, 1656,  502, 552,  524, 552,  526, 552,  526, 552,  526, 554,  524, 554,  524, 552,  526, 552,  524, 1656,  500, 1656,  502, 1656,  500, 1656,  502, 1656,  502, 1654,  502};  // COOLIX B25FC0
uint16_t cool25Max[199]= {4394, 4472,  500, 1654,  502, 552,  526, 1654,  502, 1656,  500, 554,  526, 552,  524, 1654,  502, 552,  524, 554,  524, 1656,  502, 552,  526, 552,  526, 1654,  502, 1656,  502, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 1654,  502, 1656,  502, 1654,  502, 1654,  502, 1656,  500, 1654,  502, 1654,  502, 552,  524, 554,  526, 552,  524, 554,  526, 552,  526, 554,  524, 1654,  502, 1656,  500, 554,  526, 552,  526, 552,  526, 552,  526, 552,  524, 554,  524, 554,  524, 552,  526, 1654,  502, 1654,  502, 1654,  502, 1654,  500, 1656,  500, 1656,  502, 5236,  4392, 4446,  526, 1654,  502, 552,  526, 1654,  502, 1656,  502, 554,  526, 552,  526, 1654,  502, 552,  526, 552,  524, 1656,  502, 552,  526, 554,  526, 1654,  502, 1654,  502, 552,  524, 1656,  502, 552,  524, 554,  524, 1656,  502, 1654,  500, 1656,  500, 1656,  500, 1654,  502, 1654,  502, 1654,  502, 1654,  502, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 552,  526, 1654,  502, 1654,  502, 552,  526, 552,  526, 552,  526, 552,  524, 552,  526, 552,  526, 552,  524, 552,  526, 1654,  502, 1656,  502, 1654,  500, 1656,  500, 1656,  502, 1654,  502};  // COOLIX B23FC0

const int timeZone = 9;
static const char ntpServerName[] = "us.pool.ntp.org";

WiFiUDP Udp;
unsigned int localPort = 8888;  // local port to listen for UDP packets
time_t getNtpTime();
void sendNTPpacket(IPAddress &address);
time_t prevDisplay = 0; // when the digital clock was displayed

int t[3],d[3],time_check=0;  
float tc, tf, h; //온습도 변수
int fan_on_time[3],fan_off_time[3] ={0};
int op_time[3] = {0};
int current_sec,current_min=0; 
int Motor_speed=1023 ;
String date_time,date,adtime[3];
String DRY = "\\\"DRY\\\"";
String ON = "\\\"ON\\\"";
String OFF = "\\\"OFF\\\"";
String AUTO = "\\\"AUTO\\\"";
String MANUAL = "\\\"MANUAL\\\"";

String air_con,air_temp, air_volume, air_time_on, air_time_off, fan_status, fan_con, fish_timer= "" ;
int op_flag,fan_timer_on,fan_timer_off,fan_check,feed_check, led_check, feeding_op_time, air_timer_check_on,air_timer_check_off = 0 ;

void setup()
{
  Serial.begin(115200);
  pinMode(pin_fan,OUTPUT);
  pinMode(speakerPin, OUTPUT);
  digitalWrite(speakerPin, 0);
  pinMode(led,OUTPUT);
  pinMode(ENA,OUTPUT);
  pinMode(EN1,OUTPUT);
  pinMode(EN2,OUTPUT);
  wifiCon();
  Wire.begin();
  Firebase.begin(FIREBASE_HOST, FIREBASE_AUTH);
  Udp.begin(localPort); 
  setSyncProvider(getNtpTime);
  setSyncInterval(60*60*24); // 60초 * 60분 * 24시간 -> 하루
  irsend.begin();
  
  #ifdef temp
  hdcSensor.turnOnHeater(true);
  hdcSensor.setTemperatureRes(HDC1080::T_RES_14);
  hdcSensor.setHumidityRes(HDC1080::H_RES_8);
  hdcSensor.updateConfigRegister();
  #endif
  
  #ifdef CO2
  cm1106_i2c.begin();
  delay(1000);
  cm1106_i2c.read_serial_number();
  delay(1000);
  cm1106_i2c.check_sw_version();
  delay(1000);
  #endif
  
  Firebase.reconnectWiFi(true);
  inTime();
  while(timeStatus() != timeSet) //timesetting이 되어야 시작.
  {
    setSyncProvider(getNtpTime);
    delay(2000);
  }
  inTime();
  FB_writeStr("/status_log/" + date + "/" + date_time,"ON" + String(timeStatus()));
  Serial.println("on");
}

/*-------- NTP code ----------*/

const int NTP_PACKET_SIZE = 48; // NTP time is in the first 48 bytes of message
byte packetBuffer[NTP_PACKET_SIZE]; //buffer to hold incoming & outgoing packets

time_t getNtpTime()
{
  IPAddress ntpServerIP; // NTP server's ip address

  while (Udp.parsePacket() > 0) ; // discard any previously received packets
  Serial.println("Transmit NTP Request");
  // get a random server from the pool
  WiFi.hostByName(ntpServerName, ntpServerIP);
  Serial.print(ntpServerName);
  Serial.print(": ");
  Serial.println(ntpServerIP);
  sendNTPpacket(ntpServerIP);
  _dwTickCount =0;
  uint32_t beginWait = millis();
  while (millis() - beginWait < 1500) {
      int size = Udp.parsePacket();
      if (size >= NTP_PACKET_SIZE) {
        Serial.println("Receive NTP Response");
        Udp.read(packetBuffer, NTP_PACKET_SIZE);  // read packet into the buffer
        unsigned long secsSince1900;
        // convert four bytes starting at location 40 to a long integer
        secsSince1900 =  (unsigned long)packetBuffer[40] << 24;
        secsSince1900 |= (unsigned long)packetBuffer[41] << 16;
        secsSince1900 |= (unsigned long)packetBuffer[42] << 8;
        secsSince1900 |= (unsigned long)packetBuffer[43];
        
        return secsSince1900 - 2208988800UL + timeZone * SECS_PER_HOUR;
      }
    }
  Serial.println("No NTP Response :-(");
  return 0; // return 0 if unable to get the time
}

// send an NTP request to the time server at the given address
void sendNTPpacket(IPAddress &address)
{
  // set all bytes in the buffer to 0
  memset(packetBuffer, 0, NTP_PACKET_SIZE);
  // Initialize values needed to form NTP request
  // (see URL above for details on the packets)
  packetBuffer[0] = 0b11100011;   // LI, Version, Mode
  packetBuffer[1] = 0;     // Stratum, or type of clock
  packetBuffer[2] = 6;     // Polling Interval
  packetBuffer[3] = 0xEC;  // Peer Clock Precision
  // 8 bytes of zero for Root Delay & Root Dispersion
  packetBuffer[12] = 49;
  packetBuffer[13] = 0x4E;
  packetBuffer[14] = 49;
  packetBuffer[15] = 52;
  // all NTP fields have been given values, now
  // you can send a packet requesting a timestamp:
  Udp.beginPacket(address, 123); //NTP requests are to port 123
  Udp.write(packetBuffer, NTP_PACKET_SIZE);
  Udp.endPacket();
}

void DB(){
  #ifdef air
  if(!FB_readStr("/air/air_con").equals("fail"))
  {
      Serial.printf("air_exist\n");
  }
  else
  {
      FB_writeStr("/air/air_on_time","0");
      FB_writeStr("/air/air_off_time","0");
      FB_writeStr("/air/air_con","0");
      FB_writeStr("/air/air_log","0");
      FB_writeStr("/air/air_cold_warm","0");
      FB_writeStr("/air/air_temp","0");
      FB_writeStr("/air/air_volume","0");
      Serial.printf("air_making\n");
   }
   #endif
   
   #ifdef fan
   if(!FB_readStr("/fan/fan_con").equals("fail"))
   {
      Serial.printf("fan_exist\n");
   }
   else
   {
      FB_writeStr("/fan/fan_con","0");
      FB_writeStr("/fan/fan_log","0");
      FB_writeStr("/fan/fan_on_time","0");
      FB_writeStr("/fan/fan_off_time","0");
      FB_writeStr("/fan/fan_status","0");
      Serial.printf("fan_making\n");
    }
    #endif
    
    #ifdef feeder
    if(!FB_readStr("/feeder/feeder_timer").equals("fail"))
    {
      Serial.printf("feeder_exist\n");
    }
    else
    {
        FB_writeStr("/feeder/feeder_op_test_flag","0");
        FB_writeStr("/feeder/feeder_op_time","0");
        FB_writeStr("/feeder/feeder_timer","0");
        FB_writeStr("/feeder/feeder_log","0");
        Serial.printf("feeder_making\n");
    }
    #endif  
    
}
void Co_2()
{
  uint8_t ret = cm1106_i2c.measure_result();
  if (ret == 0) {
    Serial.print("Co2 : ");
    Serial.println(cm1106_i2c.co2);
    FB_write("/CO2/" + date + "/" + date_time + "/co2",cm1106_i2c.co2);
    Serial.print("Status : ");
    switch (cm1106_i2c.status) {
      case CM1106_I2C_STATUS_PREHEATING: {
          Serial.println("Preheating");
          FB_writeStr("/CO2/" + date + "/" + date_time + "/status","Preheating");
          break;
        }
      case CM1106_I2C_STATUS_NORMAL_OPERATION: {
          Serial.println("Normal operation");
          FB_writeStr("/CO2/" + date + "/" + date_time + "/status","Normal operation");
          break;
        }
      case CM1106_I2C_STATUS_OPERATING_TROUBLE: {
          Serial.println("Operating trouble");
          FB_writeStr("/CO2/" + date + "/" + date_time + "/status","Operating trouble");
          break;
        }
      case CM1106_I2C_STATUS_OUT_OF_FS: {
          Serial.println("Out of FS");
          FB_writeStr("/CO2/" + date + "/" + date_time + "/status","Out of FS");
          break;
        }
      case CM1106_I2C_STATUS_NON_CALIBRATED: {
          Serial.println("Non calibrated");
          FB_writeStr("/CO2/" + date + "/" + date_time + "/status","Non calibrated");
          break;
        }
    }
  }
}

void fan_timer()
{
  int on_time[3], off_time[3],check_time[3],over=0;
  String fan_timer_on_buf, fan_timer_off_buf ="";
  fan_timer_on_buf = FB_readStr("/fan/fan_on_time");
  fan_timer_off_buf = FB_readStr("/fan/fan_off_time");
  
  if(!fan_timer_on_buf.equals("fail"))
    fan_timer_on = fan_timer_on_buf.toInt();
  if(!fan_timer_off_buf.equals("fail"))
    fan_timer_off = fan_timer_off_buf.toInt();

  if(fan_check == 0)//fan on되어있을때
  {
     on_time[0] = fan_timer_on%60; //60분이 넘는 시간을 분단위로
     on_time[1] = fan_timer_on/60; //60분이 넘는 시간을 시간단위로
     check_time[0] = fan_on_time[0] + on_time[0]; // 시작시간(분) + 설정시간(분)
     check_time[1] = fan_on_time[1] + on_time[1]; // 시작시간(시) + 설정시간(시)
     check_time[2]= fan_on_time[2];
  }
  else if(fan_check == 1)
  {
     off_time[0] = fan_timer_off%60;
     off_time[1] = fan_timer_off/60;
     check_time[0] = fan_off_time[0] + off_time[0];
     check_time[1] = fan_off_time[1] + off_time[1];
     check_time[2]= fan_off_time[2];
  }
  if(check_time[0]>59) // 시작시간(분) + 설정시간(분)이 59분보다 클시 단위를 시로 바꿈
  {
      check_time[0]=check_time[0] % 60;
      check_time[1]++;
  }
  if(check_time[1]>23)// 시작시간(시) + 설정시간(시)이 23시보다 클 시 다음날 시간으로 바꿈
  {
    check_time[1]=check_time[1]%24;
    check_time[2]++;
    over = 1;
  }
  if(fan_timer_on == 0 && fan_timer_off == 0) // AUTO로 설정되어있으나 둘다 0분으로 설정되었을시
  {
    fan_on_time[0] = minute();
    fan_on_time[1] = hour();
    fan_on_time[2] = day();
  }
  else 
  {
    if(hour()==0)
      over =0;
    if((((check_time[0] <= minute() && check_time[1] == hour()) || check_time[1] < hour()) || day() != check_time[2]) && over == 0)// 예약시간보다 크거나 같으면
    {
      if(fan_check == 0)//팬이 on상태면 off상태로 바꿈 
      {
         digitalWrite(pin_fan,HIGH);
         Serial.println("fan_off");
         fan_con=OFF;
         fan_check = 1;
         fan_off_time[0] = minute();//off시작시간(분)
         fan_off_time[1] = hour();//off시작시간(시)
         fan_off_time[2] = day();
         FB_writeStr("/fan/fan_log/" + date + "/" + date_time , "fan_off");
      }
      else if (fan_check == 1)
      {
        digitalWrite(pin_fan,LOW);
        Serial.println("su_fan_on");
        fan_con=ON;
        fan_check = 0;
        fan_on_time[0] = minute();
        fan_on_time[1] = hour();
        fan_on_time[2] = day();
        FB_writeStr("/fan/fan_log/" + date + "/" + date_time  , "fan_on");
      }
    }
  }
}

void fan_control()
{
  String fan_status_buf = "";
  fan_status_buf = FB_readStr("/fan/fan_status");
  if(fan_status.equals(AUTO))
     fan_timer();
  else if(fan_status.equals(MANUAL))
     fan_on_off("/fan/fan_con");
  if(!fan_status.equals(fan_status_buf) && !fan_status_buf.equals("fail"))//FB에서 데이터값이 fail이 아니고, 현재값과 다를때
  {
    fan_status = fan_status_buf;
    if(fan_status.equals(AUTO))
    {
      digitalWrite(pin_fan,LOW);
      Serial.println("fan_on");
      fan_on_time[0] = minute();
      fan_on_time[1] = hour();
      fan_on_time[2] = day();
      fan_con=ON;
      fan_check=0;
      fan_timer();
      Serial.println("fan_auto");
      FB_writeStr("/fan/fan_log/"+date +"/"+ date_time , "fan_auto");
    }
    else if(fan_status.equals(MANUAL))
    {
      fan_on_off("/fan/fan_con");
      Serial.println("fan_manual");
      FB_writeStr("/fan/fan_log/"+date +"/"+ date_time , "fan_manual");
    }
  }
}
String FB_readStr(String pathName)
{
     if(Firebase.getString(firebaseData, kinds + pathName))//성공시 1반환
     {
          return firebaseData.stringData();
     }
     else
     {
          Serial.print("Error in get data, ");
          Serial.print(pathName);
          Serial.println(firebaseData.errorReason());
          FB_writeStr("/status_log/" + date + "/" + date_time,pathName+" "+firebaseData.errorReason());
          return "fail";
     }
}

void send_off()
{
  for(int i= 0; i<3; i++)
  {
    irsend.sendRaw(air_off,199, 38); 
    delay(500);
   }
   Serial.println("air_con off\n");
   FB_writeStr("/air/air_log/"+date+"/"+date_time, "off");
}

void send_on(int x,String state)
{  
   uint16_t *air_send;
   if(x==0)
    air_send = cool17Min;
   else if(x==1)
    air_send = cool17Mid;
   else if(x==2)
    air_send = cool17Max;
   else if(x==3)
    air_send = cool17Auto;
   else if(x==4)
    air_send = cool18Min;
   else if(x==5)
    air_send = cool18Mid;
   else if(x==6)
    air_send = cool18Max;
   else if(x==7)
    air_send = cool18Auto;
   else if(x==8)
    air_send = cool19Min;
   else if(x==9)
    air_send = cool19Mid;
   else if(x==10)
    air_send = cool19Max;
   else if(x==11)
    air_send = cool19Auto;
   else if(x==12)
    air_send = cool20Min;
   else if(x==13)
    air_send = cool20Mid;
   else if(x==14)
    air_send = cool20Max;
   else if(x==15)
    air_send = cool20Auto;
   else if(x==16)
    air_send = cool21Min;
   else if(x==17)
    air_send = cool21Mid;
   else if(x==18)
    air_send = cool21Max;
   else if(x==19)
    air_send = cool21Auto;
   else if(x==20)
    air_send = cool22Min;
   else if(x==21)
    air_send = cool22Mid;
   else if(x==22)
    air_send = cool22Max;
   else if(x==23)
    air_send = cool22Auto;
   else if(x==24)
    air_send = cool23Min;
   else if(x==25)
    air_send = cool23Mid;
   else if(x==26)
    air_send = cool23Max;
   else if(x==27)
    air_send = cool23Auto; 
   else if(x==28)
    air_send = cool24Min;
   else if(x==29)
    air_send = cool24Mid;
   else if(x==30)
    air_send = cool24Max;
   else if(x==31)
    air_send = cool24Auto;
   else if(x==32)
    air_send = cool25Min;
   else if(x==33)
    air_send = cool25Mid;
   else if(x==34)
    air_send = cool25Max;
   else if(x==35)
    air_send = cool25Auto;
   for(int i= 0; i<3; i++)
   {
    irsend.sendRaw(air_send, 199, 38); 
    delay(500);
   }
   Serial.println("air_con " + state);
   FB_writeStr("/air/air_log/"+date+"/"+date_time, state);
}
void send_dry()
{
   for(int i= 0; i<3; i++)
   {
    irsend.sendRaw(air_dry, 199, 38); 
    delay(500);
    }
    Serial.println("air_con dry");
    FB_writeStr("/air/air_log/"+date+"/"+date_time, "dry");
}

void temp_humi()
{
  Serial.println("온습도 함수 진입");
  tf = hdcSensor.getTemperatureHumidity(tc, h);
  if(tc<100)
  {
    FB_write("/temp_humi/" + date + "/" + date_time + "/temp",tc);
    FB_write("/temp_humi/" + date + "/" + date_time + "/humi",h);
  }
  else
    FB_writeStr("/status_log/" + date + "/" + date_time,"temp_humi error");
}

void FB_writeStr(String FBpath, String value)
{
  if(Firebase.setString(firebaseData,kinds + FBpath , value))//성공시 1반환
      Serial.println("Set data success");
  else
  {
      Serial.print("Error data-> ");
      Serial.println(firebaseData.errorReason());
  }    
}
void FB_write(String FBpath, int senserValue)
{
    if(Firebase.setInt(firebaseData, kinds + FBpath , senserValue))//성공시 1반환
        Serial.println("Set int data success");
    else
    {
      Serial.print("Error in setInt, ");
      Serial.println(firebaseData.errorReason());
    }
}

void fan_on_off(String Path) //fan_status가 MANUAL일 때 실행되는 함수
{
  String fan_con_buf = "";
  fan_con_buf =FB_readStr(Path);
  if(!fan_con_buf.equals("fail") && !fan_con_buf.equals(fan_con))//데이터 값이 fail이 아니고 현재 값과 다를때
  {
    if(ON.equals(fan_con_buf))//on상태
    {
        digitalWrite(pin_fan,LOW);
        Serial.println(Path + " on");
        fan_con=ON;
        FB_writeStr("/fan/fan_log/" + date +"/"+ date_time  , "fan_on");
    }
    else if(OFF.equals(fan_con_buf))//off상태
    {  
        digitalWrite(pin_fan,HIGH);
        Serial.println(Path + " off");
        fan_con=OFF;
        FB_writeStr("/fan/fan_log/" + date +"/"+ date_time  , "fan_off");
     }
  }
}

void air_timer(String state)
{
  String buf;
  String FBpath= "/air/air_"+state+"_time";
  buf = FB_readStr(FBpath);
  if(!buf.equals("fail"))
  {
    if(state.equals("on")) //타이머 on예약일때
      air_time_on = buf; 
    else if(state.equals("off"))
      air_time_off = buf;
  }
  if(state.equals("on"))
     Split(air_time_on,state);
  else if(state.equals("off"))
     Split(air_time_off,state);
}

void Split(String sData, String state)
{  
  int nCount = 0;
  int nGetIndex = 0 ;
  String buf[5];
  sData.replace("\"", "");
  sData.replace("\\", "");
  sData.replace("[", "");
  sData.replace("]", "");
  //임시저장
  String sTemp = "";
  //원본 복사
  String sCopy = sData;
 
  while(true)
  {
    //구분자 찾기
    nGetIndex = sCopy.indexOf(",");
    //리턴된 인덱스가 있는지
    if(-1 != nGetIndex)
    {
      //있으면 데이터 넣음
      buf[nCount] = sCopy.substring(0, nGetIndex);
      //뺀 데이터 만큼 잘라낸다.
      sCopy = sCopy.substring(nGetIndex + 1);
    }
    else
    {
      //없으면 마무리 한다.
      buf[nCount] =sCopy;
      if(state.equals("on")||state.equals("off"))
        air_timer2(buf, state, nCount);
      if(state.equals("fish"))
        fish_timer2(buf,nCount);
       
      break;
    }
    //다음 문자
    ++nCount;
  }
}
void air_timer2(String buf[],String state,int nCount) //state는 on으로 비교 파이어베이스에 path가 소문자
{
  int count=-1;
  if(buf[0]!= NULL)
  {
    for(int i=0; i<=nCount; i++)
    {
      int first = buf[i].indexOf(":");
      int th =  buf[i].substring(0,first).toInt();
      int tm =  buf[i].substring(first+1,buf[i].length()).toInt();
      if( th == hour() && tm == minute())
      { 
        Serial.print("air_timer ->");
        Serial.print(th);
        Serial.print(" : ");
        Serial.println(tm);
      
        if(state.equals("on")&&air_timer_check_on==0)
        {
            air_con = ON;
            FB_writeStr("/air/air_con",ON);
            air_status(1);
            air_timer_check_on=1;
         }
          else if(state.equals("off")&&air_timer_check_off==0)
          {
             air_con = OFF;
             FB_writeStr("/air/air_con",OFF);
             send_off();
             air_timer_check_off=1;
          }          
       }
       else
       { 
          count++;
       }
      }
    }
    if(count==nCount) // 현재시간과 타이머 시간이 모두 같지 않음.
    {
      if(state.equals("off"))
        air_timer_check_off=0;
      else
        air_timer_check_on=0;
    }
}

void air_status(int air_state) //air_state가 1이면 타이머거나 off에서 on으로 바뀌었을시
{
  String air_temp_buf, air_volume_buf,sendmessage = "";
  int x=0;
  air_temp_buf = FB_readStr("/air/air_temp");
  air_volume_buf =FB_readStr("/air/air_volume");
  if(air_state==1 ||air_temp!=air_temp_buf|| air_volume != air_volume_buf)
  {
    if(!air_temp_buf.equals("fail"))
    {
        air_temp=air_temp_buf;
        Serial.println(air_temp);
    }
    if(!air_volume_buf.equals("fail"))
    {
        air_volume=air_volume_buf;
        Serial.println(air_volume);
    }
    
    sendmessage = air_temp;//데이터 베이스 피드백용 message
    int airtemp = air_temp.toInt(); //최저온도인 17을 뺌.
    if( airtemp >= 17 && airtemp <= 25 )//온도 범위
    {
      x=x+4*(airtemp-17); //순서를 정하기 위함.
    }
    else 
    {
      Serial.print("입력범위 초과");
      FB_writeStr("/air/air_log/"+date+"/"+date_time, "입력범위 초과");
      return;
    }
    if(air_volume.equals("\\\"MIN\\\""))
    {
      x=x+0;
      sendmessage = "min" + sendmessage;
    }
    else if(air_volume.equals("\\\"MID\\\""))
    {
      x=x+1;
      sendmessage = "mid" + sendmessage;
    }
    else if(air_volume.equals("\\\"MAX\\\"")) 
    {
      x=x+2;
      sendmessage = "max" + sendmessage ;
    }
    else if(air_volume.equals("\\\"AUTO\\\""))
    {
      x=x+3;
      sendmessage = "auto" + sendmessage ;
    } 
    send_on(x,sendmessage);
   }  
}
void aircontrol()
{
   String air_con_buf = " ";
   air_con_buf = FB_readStr("/air/air_con"); // FB에서 air_con값을 읽어옴.
   if(!air_con.equals(air_con_buf) && !air_con_buf.equals("fail")) // 읽어온 값이 fail이 아니고 이전 값과 같지 않을시
   {
        air_con = air_con_buf;
        Serial.printf("에어컨 변수 비교");
        if(ON.equals(air_con))
          air_status(1); // air_status 가 off나 dry에서 on으로 바뀌었을시 무조건 실행
        else if(OFF.equals(air_con))
          send_off();
        else if(DRY.equals(air_con))
          send_dry();
   }
   if(ON.equals(air_con))
      air_status(0); //air_status가 on이나 temp, volume값만 바뀌었을시 
   
    air_timer("on");   
    air_timer("off");
}
void fish_con()
{
  String FBpath= "/feeder/feeder_timer";
  String buf = FB_readStr(FBpath);
  if(!buf.equals("fail"))
    fish_timer = buf;

  Split(fish_timer,"fish");
}

void fish_timer2(String buf[],int nCount)
{
  int count=-1; //타이머배열 안에 시간이 없으면 배열 길이 -1 
  String op_time_buf="";
  op_time_buf =FB_readStr("/feeder/feeder_op_time");
  if(buf[0]!= NULL)//타이머 시간이 있으면
  {
    for(int i=0; i<=nCount; i++)//타이머 배열
    {
      int first = buf[i].indexOf(":");
      int th =  buf[i].substring(0,first).toInt();
      int tm =  buf[i].substring(first+1,buf[i].length()).toInt();
      if(th == hour() && tm == minute()) //시간이 같을 때 count가 증가하지 않음.
      {
        Serial.print("feed timer ->");
        Serial.print(th);
        Serial.print(" : ");
        Serial.println(tm);
        if(feed_check==0)
        {
          for(int j=1;j<=5; j++)
          {
            digitalWrite(speakerPin, 255);
            delay (500);
            digitalWrite(speakerPin, 0);
            delay(500-(j*10));
          }
          if(!op_time_buf.equals("fail"))
              feeding_op_time = op_time_buf.toInt();
          digitalWrite(EN1, LOW);  // 모터A설정
          digitalWrite(EN2, HIGH);  
          analogWrite(ENA, Motor_speed);  
          delay(feeding_op_time*1000);// 초단위로 바꿈 
          analogWrite(ENA, 0); 
          FB_writeStr("/feeder/feeder_log/" + date + "/" + date_time ,"feeding");
          Serial.println("feeding");
          feed_check=1;
        }
      }
      else//시간이 다르면 count가 증가함.
      {
        count++;
      }
    }
    if(count==nCount) // 현재시간과 타이머 시간이 모두 같지 않음.
    {
        feed_check=0;
    }
  }  
}

void wifiCon()
{ 
  //wifi setting
  int a=0;
  WiFi.mode(WIFI_STA); //다른 공유기에 접속해서 IP를 할당받고, HTTP 통신을 사용하는 모드
  WiFi.begin(WIFI_SSID, WIFI_PASSWORD);
  Serial.print("Connecting to Wi-Fi");
  while (WiFi.status() != WL_CONNECTED)
  {
    Serial.print(".");
    delay(300);
    a++;
    if(a>30)
       break;
  }
  Serial.println();
  Serial.print("Connected with IP: ");
  Serial.println(WiFi.localIP());
  Serial.println();
}

void inTime()
{
      if(second()<10)      adtime[0]="0"+String(second());
      else adtime[0]=String(second());
      if(minute()<10)      adtime[1]="0"+String(minute());
      else adtime[1]=String(minute());
      if(hour()<10)        adtime[2]="0"+String(hour());
      else adtime[2]=String(hour());
      
      date_time = adtime[2] + ":" +adtime[1] + ":" +adtime[0];
      
      if(day()<10)      adtime[0]="0"+String(day());
      else adtime[0]=String(day());
      if(month()<10)      adtime[1]="0"+String(month());
      else adtime[1]=String(month());

      date = String(year()) + "-" + adtime[1] + "-" + adtime[0];
}
void fish_flag()
{
  String test_flag = FB_readStr("/feeder/feeder_op_test_flag");
  if(!test_flag.equals("fail") && (test_flag.toInt()== 1) && op_flag==0 )//읽어온 플래그가 1이며 현재 플래그가 0일때 
  {
    FB_writeStr("/feeder/feeder_log/" + date + "/" + date_time ,"feeder testing");
    Serial.println("feeder flag test start");
    String op_time_buf = FB_readStr("/feeder/feeder_op_time");
    if(!op_time_buf.equals("fail"))
      feeding_op_time = op_time_buf.toInt();
    op_time[0]=second(); //flag 시작시간
    op_time[1]=minute();
    op_time[2]=hour();
    digitalWrite(EN1, LOW);  // 모터A설정
    digitalWrite(EN2, HIGH);  
    analogWrite(ENA, Motor_speed); 
    op_flag=1;
    op_time[0]=op_time[0]+feeding_op_time;
    if(op_time[0]>59)
    {
        op_time[0]=op_time[0]%60;
        op_time[1]++;
    }
    if(op_time[1]>59)
    {
      op_time[1]=op_time[1]%60;
      op_time[2]++;
    }
    if(op_time[2]>23)
    {
      op_time[2]%=24;
    }
  }
  if(op_flag==1)
  {
    if((op_time[0]<=second()&&op_time[1]<=minute()&&op_time[2]==hour()) ||(!test_flag.equals("fail") && test_flag.toInt()== 0)) //시간이 다 되었거나 플래그를 다시 1로 바꾸었을시 종료
    {
      analogWrite(ENA, 0);  
      Serial.println("feeder flag test end");
      FB_writeStr("/feeder/feeder_op_test_flag","0");
      op_flag=0;
      return;
    }
  }
}
void loop()
{ 
 inTime();
 if(timeStatus() == timeSet && year() != 2036 && year() != 1970)
 {
    if(WiFi.status() != WL_CONNECTED)
    { 
      wifiCon();
      FB_writeStr("/status_log/" + date + "/" + date_time, "wifi status is not connected try reconnect");
    }
    inTime();//프로그램 내 시간 
    if(current_sec != second()) //1초
    {
        inTime();//프로그램 내 시간
        current_sec = second();
        digitalWrite(speakerPin, 0);
        if(led_check==0)
        {
          digitalWrite(led, LOW);
          led_check=1;
        }
        else if(led_check==1)
        {
          digitalWrite(led, HIGH);
          led_check=0;
        }
 
        #ifdef air   
        aircontrol(); //에어컨 제어 
        Serial.println("에어컨 제어");
        #endif
        
        #ifdef fan
        fan_control(); //팬 제어
        Serial.println("팬 제어");
        #endif
        
        #ifdef feeder
       // ESP.wdtEnable(0);
        fish_con(); //모터 제어
        fish_flag();
        Serial.println("모터 제어");
       // ESP.wdtDisable();
        #endif
         
     } 
     if(current_min != minute())// 1분
     {
       inTime();//프로그램 내 시간
       Firebase.reconnectWiFi(true);
       current_min = minute();
       Serial.println(date+" "+ date_time);
       #ifdef temp
       temp_humi();
       Serial.println("온습도 측정");
       #endif
       #ifdef CO2
       Co_2();
       #endif
     }
 }
 else
 {  
    if(WiFi.status() != WL_CONNECTED)
    { 
        wifiCon();
        setSyncProvider(getNtpTime);
        inTime();
        FB_writeStr("/status_log/" + date + "/" + date_time, "wifi status is not connected try reconnect");
    }
    else
    {
      setSyncProvider(getNtpTime);
      inTime();
      FB_writeStr("/status_log/" + date + "/" + date_time,"time_set is " + String(timeStatus()));
      delay(2000);
    }
 }
}